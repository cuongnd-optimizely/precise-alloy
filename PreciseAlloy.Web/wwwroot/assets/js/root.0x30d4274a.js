import{j as p,a as e,F as f}from"./react-loader.0x0e9dc0af.js";import{r as l,l as y}from"./vendor.0x2c817467.js";import{v as N,R as T}from"./require-css.0x6e5ca354.js";const E=l.createContext({setActiveItem:()=>{},setTopPanel:()=>{}}),w=()=>l.useContext(E),k=350,x=(t,s)=>Math.floor(Math.random()*(s-t+1)+t),L=()=>{const[t,s]=l.useState(),o=c=>{const a=document.getElementById("root-iframe-wrapper");a&&(c?a.style.maxWidth=`min(100%, ${c}px)`:a.style.removeProperty("max-width"))};return p("div",{className:"xpack-o-root__frame-control",children:[e("div",{id:"root-actual-iframe-width",className:"xpack-o-root__actual-width"}),p("div",{className:"xpack-o-root__controls",children:[e("button",{className:"xpack-o-root__control-button",onClick:()=>{t&&clearInterval(t);const c=x(k,768);o(c)},children:e("svg",{viewBox:"0 0 24 24",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:"/assets/images/root.svg#phone"})})}),e("button",{className:"xpack-o-root__control-button",onClick:()=>{t&&clearInterval(t);const c=x(768,1024);o(c)},children:e("svg",{viewBox:"0 0 24 24",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:"/assets/images/root.svg#tablet"})})}),e("button",{className:"xpack-o-root__control-button",onClick:()=>{t&&clearInterval(t);const c=document.body.clientWidth-300,a=x(1024,Math.max(1024,c));o(a)},children:e("svg",{viewBox:"0 0 24 24",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:"/assets/images/root.svg#desktop"})})}),e("button",{className:"xpack-o-root__control-button",onClick:()=>{t&&clearInterval(t),o(void 0)},children:e("svg",{viewBox:"0 0 24 24",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:"/assets/images/root.svg#hay"})})}),e("button",{className:"xpack-o-root__control-button",onClick:()=>{t&&clearInterval(t);const c=document.body.clientWidth-300,a=x(k,Math.max(k,c));o(a)},children:e("svg",{viewBox:"0 0 24 24",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:"/assets/images/root.svg#random"})})}),e("button",{className:"xpack-o-root__control-button",onClick:()=>{if(t){clearInterval(t);return}const c=setInterval(()=>{const a=document.body.clientWidth-300,v=x(k,Math.max(k,a));o(v)},2e3);s(c)},children:e("svg",{viewBox:"0 0 24 24",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:"/assets/images/root.svg#disco-ball"})})})]})]})};function R(t,s,o){l.useEffect(()=>{const r=i=>{!i.target||!t.current||t.current.contains(i.target)||o&&o.some(m=>{var u;return(u=m.current)==null?void 0:u.contains(i.target)})||s(i)};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)}},[t,s,o])}const M=()=>{const{activeItem:t,isTopPanel:s}=w(),o="pl-show-state-selector",r=localStorage.getItem(o),i=l.createRef(),m=l.createRef();R(i,()=>a(!1),[m]);const u=g=>(g.preventDefault(),g.stopPropagation(),r?localStorage.removeItem(o):localStorage.setItem(o,"true"),location.reload(),!1),d=r?"Hide state selector":"Show state selector",_=()=>r?e(f,{}):p("div",{className:"pl-state-toggle__circles",children:[e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"})]}),[c,a]=l.useState(!1);return t?p("div",{children:[e("button",{ref:m,className:`xpack-o-root__control-button xpack-o-root__button-${c?"close":"setting"}`,onClick:()=>{a(!c)},children:e("svg",{viewBox:"0 0 30 30",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:c?"/assets/images/root.svg#close":"/assets/images/root.svg#setting"})})}),p("div",{ref:i,className:`xpack-o-root__active-item-options ${c?"show":""}`,children:[p("a",{className:"xpack-o-root__nav-item pl-state-toggle",href:"#",onClick:u,children:[e(_,{}),d]}),e("a",{className:"xpack-o-root__nav-item panel-position",href:"#",onClick:()=>{window.setState("MSG_IS_TOP_PANEL",s?"false":"true"),a(!1)},children:s?"Set left panel":"Set top panel"}),e("a",{className:"xpack-o-root__nav-item",href:N(t.path,!0),target:"_blank",children:"Open in new tab"})]})]}):e(f,{})},S=t=>{const{activeItem:s,setActiveItem:o}=w(),r=m=>(m.preventDefault(),window.location.hash=t.path,o(t),!1),i=s&&s.path===t.path?" xpack-o-root__nav-item--active":"";return e("a",{className:"xpack-o-root__nav-item"+i,href:N(t.path,!0),target:"inner",onClick:r,children:t.name})},A=({routes:t})=>{const{activeItem:s}=w(),[o,r]=l.useState(!1),i=l.createRef(),m=l.createRef(),[u,d]=l.useState(t),[_,c]=l.useState([]),[a,v]=l.useState("");R(i,()=>r(!1),[m]);const b=()=>{r(!o)},g=l.useCallback(y.debounce(n=>{const h=[],I=[];t.forEach(C=>{n.trim()&&n.trim().toLocaleLowerCase().split(/\s+/).some(P=>C.name.toLocaleLowerCase().includes(P))?I.push(C):h.push(C)}),c(I),d(h)},500),[]);return l.useEffect(()=>{g(a)},[g,a]),p(f,{children:[e("a",{ref:m,className:"xpack-o-root__button-close",onClick:b,children:e("button",{className:"xpack-o-root__control-button xpack-o-root__button-close",children:e("svg",{className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:N("/assets/images/root.svg#"+(o?"close":"list"))})})})}),e("p",{className:"xpack-o-root__title",children:s==null?void 0:s.name}),p("div",{ref:i,className:`xpack-o-root__nav-items ${o?"show":""}`,children:[e("div",{className:"xpack-o-root__search",children:e("input",{type:"text",value:a,placeholder:"Find a pattern",onChange:n=>{v(n.target.value)}})}),p("div",{className:"xpack-o-root__items",children:[a.trim()&&e("div",{className:"xpack-o-root__search-matches",children:_.length?_.filter(n=>n.path!="/"&&n.path!="/index").sort((n,h)=>n.name<h.name?-1:n.name>h.name?1:0).map((n,h)=>e(S,{...n},h)):a.trim()&&e("div",{className:"xpack-o-root__nav-message ",children:"No pattern matches"})}),e("div",{className:`xpack-o-root__search-not-matches ${a.trim()?"blur":""}`,children:u.filter(n=>n.path!="/"&&n.path!="/index").sort((n,h)=>n.name<h.name?-1:n.name>h.name?1:0).map((n,h)=>e(S,{...n},h))})]})]})]})},B=({routes:t})=>{const[s,o]=l.useState(),[r,i]=l.useState(localStorage.getItem("MSG_IS_TOP_PANEL")==="true");l.useEffect(()=>{if(!s)return;const d=document.querySelector("#root-iframe");d&&(d.src=N(s.path,!0),document.title=s.name+" - Precise Alloy UI")},[s]);const m={activeItem:s,setActiveItem:o,isTopPanel:r,setTopPanel:i};l.useEffect(()=>{const d=window.location.hash,_=d&&d.startsWith("#/")?d.substring(1):"/pages/home",c=t.findIndex(a=>a.path===_);if(c>=0)o(t[c]);else{const a=t.findIndex(v=>v.path==="/pages/home");o(t[a])}},[t]);const u=d=>{switch(d.key){case"MSG_IS_TOP_PANEL":i(d.newValue==="true");break}};return l.useEffect(()=>(window.addEventListener("storage",u),()=>{window.removeEventListener("storage",u)}),[]),t?p(E.Provider,{value:m,children:[p("div",{className:`xpack-o-root ${r?"top-panel":""}`,children:[e(A,{routes:t}),e(L,{}),e(M,{})]}),e(T,{path:"b-root"})]}):e(f,{})};export{B as default};
//# sourceMappingURL=root.0x30d4274a.js.map
