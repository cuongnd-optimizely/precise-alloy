{"version":3,"file":"mock-api.js","sources":["../../../mock-api/core/event.ts","../../../mock-api/core/fetch.ts","../../../mock-api/core/mock.ts","../../../mock-api/request/avatar/data.ts","../../../src/assets/scripts/mock-api.entry.ts"],"sourcesContent":["import { DispatchModel, EventListenerModel, EventModel, MockResponseModel } from \"./_types\";\n\n/**\n * Manager event\n * add event listener or dispatch event\n */\nclass EventCenter {\n  public events: EventModel;\n\n  constructor() {\n    this.events = {}\n  }\n\n  /**\n   * @param eventID\n   * @param callback\n   */\n  addEventListener(model: EventListenerModel) {\n    const { url, callback } = model;\n    const obj = new URL(url, window.location.origin);\n\n    this.events[obj.href] = callback;\n  }\n\n  /**\n   * @param eventURL\n   * @param req\n   */\n  dispatch(model: DispatchModel): MockResponseModel {\n    const { url, req } = model;\n\n    const callback = this.events[url.href];\n\n    if (typeof callback === 'function') {\n      return callback.call(this, req);\n    }\n\n    return {\n      status: 404,\n      body: {\n        error: 'NOT FOUND'\n      }\n    }\n  }\n}\n\nconst center = new EventCenter();\n\nexport default center;\n","import center from \"./event\";\n\nexport default function mockFetch(input: URL | RequestInfo, req?: RequestInit): Promise<Response> {\n  if (typeof input === 'string') {\n    input = new URL(input, window.location.origin);\n  }\n\n  if (input instanceof Request) {\n    console.log(`${input.url}: you're using origin fetch`);\n\n    return window.originFetch(input, req);\n  }\n\n  const response = center.dispatch({ url: input, req });\n\n  if (response.status && response.status === 404) {\n    console.log(`${input.href}: The api is not exists in mock, fallback to origin fetch`);\n\n    return window.originFetch(input, req);\n  }\n\n  console.log(`${input.href}: you're using mock fetch`);\n\n  return new Promise(resolve => {\n    resolve(\n      new Response(\n        JSON.stringify(response.body),\n        {\n          status: response.status\n        }\n      )\n    )\n  })\n}\n","import { EventListenerModel } from \"./_types\";\nimport center from \"./event\";\n\n\nexport default function mock(model: EventListenerModel) {\n  center.addEventListener(model);\n}\n","import { AvatarModel } from \"@_types/organisms\";\n\nexport const avatarData: AvatarModel[] = [\n  {\n    name: \"Peg Legge\",\n    image: {\n      src: \"/samples/peg-legge.svg\",\n      width: '175',\n      height: '175',\n      alt: 'people 1'\n    },\n    jobTitle: \"CEO\"\n  },\n  {\n    name: \"Richard Guerra\",\n    image: {\n      src: \"/samples/richard-guerra.svg\",\n      width: '175',\n      height: '175',\n      alt: 'people 2'\n    },\n    jobTitle: \"CEO\"\n  },\n  {\n    name: \"Alexandra Stolz\",\n    image: {\n      src: \"/samples/alexandra-stolz.svg\",\n      width: '175',\n      height: '175',\n      alt: 'people 3'\n    },\n    jobTitle: \"CEO\"\n  },\n  {\n    name: \"Janet Bray\",\n    image: {\n      src: \"/samples/janet-bray.svg\",\n      width: '175',\n      height: '175',\n      alt: 'people 4'\n    },\n    jobTitle: \"CEO\"\n  },\n]","import mockFetch from \"@mock/core/fetch\";\n\nwindow.originFetch = window.fetch;\n\nwindow.fetch = mockFetch;"],"names":["EventCenter","__publicField","model","url","callback","obj","req","center","mockFetch","input","response","resolve","mock","avatarData"],"mappings":"wKAMA,MAAMA,CAAY,CAGhB,aAAc,CAFPC,EAAA,eAGL,KAAK,OAAS,EAChB,CAMA,iBAAiBC,EAA2B,CACpC,KAAA,CAAE,IAAAC,EAAK,SAAAC,CAAa,EAAAF,EACpBG,EAAM,IAAI,IAAIF,EAAK,OAAO,SAAS,MAAM,EAE1C,KAAA,OAAOE,EAAI,IAAI,EAAID,CAC1B,CAMA,SAASF,EAAyC,CAC1C,KAAA,CAAE,IAAAC,EAAK,IAAAG,CAAQ,EAAAJ,EAEfE,EAAW,KAAK,OAAOD,EAAI,IAAI,EAEjC,OAAA,OAAOC,GAAa,WACfA,EAAS,KAAK,KAAME,CAAG,EAGzB,CACL,OAAQ,IACR,KAAM,CACJ,MAAO,WACT,CAAA,CAEJ,CACF,CAEA,MAAMC,EAAS,IAAIP,EC5CK,SAAAQ,EAAUC,EAA0BH,EAAsC,CAKhG,GAJI,OAAOG,GAAU,WACnBA,EAAQ,IAAI,IAAIA,EAAO,OAAO,SAAS,MAAM,GAG3CA,aAAiB,QACX,eAAA,IAAI,GAAGA,EAAM,gCAAgC,EAE9C,OAAO,YAAYA,EAAOH,CAAG,EAGtC,MAAMI,EAAWH,EAAO,SAAS,CAAE,IAAKE,EAAO,IAAAH,EAAK,EAEpD,OAAII,EAAS,QAAUA,EAAS,SAAW,KACjC,QAAA,IAAI,GAAGD,EAAM,+DAA+D,EAE7E,OAAO,YAAYA,EAAOH,CAAG,IAG9B,QAAA,IAAI,GAAGG,EAAM,+BAA+B,EAE7C,IAAI,QAAmBE,GAAA,CAC5BA,EACE,IAAI,SACF,KAAK,UAAUD,EAAS,IAAI,EAC5B,CACE,OAAQA,EAAS,MACnB,CACF,CAAA,CACF,CACD,EACH,CC7BA,SAAwBE,EAAKV,EAA2B,CACtDK,EAAO,iBAAiBL,CAAK,CAC/B,CCJO,MAAMW,EAA4B,CACvC,CACE,KAAM,YACN,MAAO,CACL,IAAK,yBACL,MAAO,MACP,OAAQ,MACR,IAAK,UACP,EACA,SAAU,KACZ,EACA,CACE,KAAM,iBACN,MAAO,CACL,IAAK,8BACL,MAAO,MACP,OAAQ,MACR,IAAK,UACP,EACA,SAAU,KACZ,EACA,CACE,KAAM,kBACN,MAAO,CACL,IAAK,+BACL,MAAO,MACP,OAAQ,MACR,IAAK,UACP,EACA,SAAU,KACZ,EACA,CACE,KAAM,aACN,MAAO,CACL,IAAK,0BACL,MAAO,MACP,OAAQ,MACR,IAAK,UACP,EACA,SAAU,KACZ,CACF,ECzCA,OAAO,YAAc,OAAO,MAE5B,OAAO,MAAQL"}