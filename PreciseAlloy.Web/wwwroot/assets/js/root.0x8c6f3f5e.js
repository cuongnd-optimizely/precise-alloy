import{j as _,a as e,F as f}from"./react-loader.0x776b2d39.js";import{r as c,l as T}from"./vendor.0x2c817467.js";import{R as y}from"./require-css.0x6bc728e7.js";const S=c.createContext({setActiveItem:()=>{},setTopPanel:()=>{}}),C=()=>c.useContext(S),g=350,k=(t,a)=>Math.floor(Math.random()*(a-t+1)+t),L=()=>{const[t,a]=c.useState(),s=o=>{const n=document.getElementById("root-iframe-wrapper");n&&(o?n.style.maxWidth=`min(100%, ${o}px)`:n.style.removeProperty("max-width"))};return _("div",{className:"xpack-o-root__frame-control",children:[e("div",{id:"root-actual-iframe-width",className:"xpack-o-root__actual-width"}),_("div",{className:"xpack-o-root__controls",children:[e("button",{className:"xpack-o-root__control-button",onClick:()=>{t&&clearInterval(t);const o=k(g,768);s(o)},children:e("svg",{viewBox:"0 0 24 24",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:"/assets/images/root.svg#phone"})})}),e("button",{className:"xpack-o-root__control-button",onClick:()=>{t&&clearInterval(t);const o=k(768,1024);s(o)},children:e("svg",{viewBox:"0 0 24 24",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:"/assets/images/root.svg#tablet"})})}),e("button",{className:"xpack-o-root__control-button",onClick:()=>{t&&clearInterval(t);const o=document.body.clientWidth-300,n=k(1024,Math.max(1024,o));s(n)},children:e("svg",{viewBox:"0 0 24 24",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:"/assets/images/root.svg#desktop"})})}),e("button",{className:"xpack-o-root__control-button",onClick:()=>{t&&clearInterval(t),s(void 0)},children:e("svg",{viewBox:"0 0 24 24",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:"/assets/images/root.svg#hay"})})}),e("button",{className:"xpack-o-root__control-button",onClick:()=>{t&&clearInterval(t);const o=document.body.clientWidth-300,n=k(g,Math.max(g,o));s(n)},children:e("svg",{viewBox:"0 0 24 24",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:"/assets/images/root.svg#random"})})}),e("button",{className:"xpack-o-root__control-button",onClick:()=>{if(t){clearInterval(t);return}const o=setInterval(()=>{const n=document.body.clientWidth-300,u=k(g,Math.max(g,n));s(u)},2e3);a(o)},children:e("svg",{viewBox:"0 0 24 24",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:"/assets/images/root.svg#disco-ball"})})})]})]})},M=()=>{const{activeItem:t,isTopPanel:a}=C(),s="pl-show-state-selector",l=localStorage.getItem(s),i=c.createRef(),d=c.createRef();E(i,()=>n(!1),[d]);const p=x=>(x.preventDefault(),x.stopPropagation(),l?localStorage.removeItem(s):localStorage.setItem(s,"true"),location.reload(),!1),m=l?"Hide state selector":"Show state selector",v=()=>l?e(f,{}):_("div",{className:"pl-state-toggle__circles",children:[e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"})]}),[o,n]=c.useState(!1);return t?_("div",{children:[e("button",{ref:d,className:`xpack-o-root__control-button xpack-o-root__button-${o?"close":"setting"}`,onClick:()=>{n(!o)},children:e("svg",{viewBox:"0 0 30 30",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:o?"/assets/images/root.svg#close":"/assets/images/root.svg#setting"})})}),_("div",{ref:i,className:`xpack-o-root__active-item-options ${o?"show":""}`,children:[_("a",{className:"xpack-o-root__nav-item pl-state-toggle",href:"#",onClick:p,children:[e(v,{}),m]}),e("a",{className:"xpack-o-root__nav-item panel-position",href:"#",onClick:()=>{window.setState("MSG_IS_TOP_PANEL",a?"false":"true"),n(!1)},children:a?"Set left panel":"Set top panel"}),e("a",{className:"xpack-o-root__nav-item",href:t.path,target:"_blank",children:"Open in new tab"})]})]}):e(f,{})},I=t=>{const{activeItem:a,setActiveItem:s}=C(),l=d=>(d.preventDefault(),window.location.hash=t.path,s(t),!1),i=a&&a.path===t.path?" xpack-o-root__nav-item--active":"";return e("a",{className:"xpack-o-root__nav-item"+i,href:t.path,target:"inner",onClick:l,children:t.name})},A=({routes:t})=>{const{activeItem:a,setActiveItem:s}=C(),[l,i]=c.useState(!1),d=c.createRef(),p=c.createRef(),[m,v]=c.useState(t),[o,n]=c.useState([]),[u,w]=c.useState("");E(d,()=>i(!1),[p]);const x=()=>{i(!l)},R=c.useCallback(T.debounce(r=>{let h=[],b=[];t.forEach(N=>{r.trim()&&r.trim().toLocaleLowerCase().split(/\s+/).some(P=>N.name.toLocaleLowerCase().includes(P))?b.push(N):h.push(N)}),n(b),v(h)},500),[]);return c.useEffect(()=>{R(u)},[u]),_(f,{children:[e("a",{ref:p,className:"xpack-o-root__button-close",onClick:x,children:e("button",{className:"xpack-o-root__control-button xpack-o-root__button-close",children:e("svg",{className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:`${l?"/assets/images/root.svg#close":"/assets/images/root.svg#list"}`})})})}),e("p",{className:"xpack-o-root__title",children:a==null?void 0:a.name}),_("div",{ref:d,className:`xpack-o-root__nav-items ${l?"show":""}`,children:[e("div",{className:"xpack-o-root__search",children:e("input",{type:"text",value:u,placeholder:"Find a pattern",onChange:r=>{w(r.target.value)}})}),_("div",{className:"xpack-o-root__items",children:[u.trim()&&e("div",{className:"xpack-o-root__search-matches",children:o.length?o.filter(r=>r.path!="/").sort((r,h)=>r.name<h.name?-1:r.name>h.name?1:0).map((r,h)=>e(I,{...r},h)):u.trim()&&e("div",{className:"xpack-o-root__nav-message ",children:"No pattern matches"})}),e("div",{className:`xpack-o-root__search-not-matches ${u.trim()?"blur":""}`,children:m.filter(r=>r.path!="/").sort((r,h)=>r.name<h.name?-1:r.name>h.name?1:0).map((r,h)=>e(I,{...r},h))})]})]})]})};function E(t,a,s){c.useEffect(()=>{const l=i=>{!t.current||t.current.contains(i.target)||s&&s.some(d=>{var p;return(p=d.current)==null?void 0:p.contains(i.target)})||a(i)};return document.addEventListener("mousedown",l),document.addEventListener("touchstart",l),()=>{document.removeEventListener("mousedown",l),document.removeEventListener("touchstart",l)}},[t,a])}const B=({routes:t})=>{const[a,s]=c.useState(),[l,i]=c.useState(localStorage.getItem("MSG_IS_TOP_PANEL")==="true");c.useEffect(()=>{if(!a)return;const m=document.querySelector("#root-iframe");m&&(m.src=a.path,document.title=a.name+" - Precise Alloy UI")},[a]);const d={activeItem:a,setActiveItem:s,isTopPanel:l,setTopPanel:i};c.useEffect(()=>{const m=window.location.hash,v=m&&m.startsWith("#/")?m.substring(1):"/pages/home",o=t.findIndex(n=>n.path===v);if(o>=0)s(t[o]);else{const n=t.findIndex(u=>u.path==="/pages/home");s(t[n])}},[]);const p=m=>{switch(m.key){case"MSG_IS_TOP_PANEL":const v=m.newValue==="true";i(v);break}};return c.useEffect(()=>(window.addEventListener("storage",p),()=>{window.removeEventListener("storage",p)}),[]),t?_(S.Provider,{value:d,children:[_("div",{className:`xpack-o-root ${l?"top-panel":""}`,children:[e(A,{routes:t}),e(L,{}),e(M,{})]}),e(y,{path:"b-root"})]}):e(f,{})};export{B as default,E as useOnClickOutside};
//# sourceMappingURL=root.0x8c6f3f5e.js.map
