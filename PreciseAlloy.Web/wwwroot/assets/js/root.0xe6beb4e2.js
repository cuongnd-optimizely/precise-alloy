import{j as p,a as e,F as N}from"./react-loader.0x47a8edc3.js";import{r as l,l as y}from"./vendor.0x2c817467.js";import{v as C,R as T}from"./require-css.0x1a7d5b01.js";const R=l.createContext({setActiveItem:()=>{},setTopPanel:()=>{}}),S=()=>l.useContext(R),k=350,f="MSG_IFRAME_SIZE",x=(t,c)=>Math.floor(Math.random()*(c-t+1)+t),A=()=>{const[t,c]=l.useState(),a=s=>{const o=document.getElementById("root-iframe-wrapper");o&&(s?(o.style.maxWidth=`min(100%, ${s}px)`,sessionStorage.setItem(f,s+"")):o.style.removeProperty("max-width"))};return p("div",{className:"xpack-o-root__frame-control",children:[e("div",{id:"root-actual-iframe-width",className:"xpack-o-root__actual-width"}),p("div",{className:"xpack-o-root__controls",children:[e("button",{className:"xpack-o-root__control-button",onClick:()=>{t&&clearInterval(t);const s=x(k,768);a(s)},children:e("svg",{viewBox:"0 0 24 24",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:"/assets/images/root.svg#phone"})})}),e("button",{className:"xpack-o-root__control-button",onClick:()=>{t&&clearInterval(t);const s=x(768,1024);a(s)},children:e("svg",{viewBox:"0 0 24 24",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:"/assets/images/root.svg#tablet"})})}),e("button",{className:"xpack-o-root__control-button",onClick:()=>{t&&clearInterval(t);const s=document.body.clientWidth-300,o=x(1024,Math.max(1024,s));a(o)},children:e("svg",{viewBox:"0 0 24 24",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:"/assets/images/root.svg#desktop"})})}),e("button",{className:"xpack-o-root__control-button",onClick:()=>{t&&clearInterval(t),a(void 0),sessionStorage.removeItem(f)},children:e("svg",{viewBox:"0 0 24 24",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:"/assets/images/root.svg#hay"})})}),e("button",{className:"xpack-o-root__control-button",onClick:()=>{t&&clearInterval(t);const s=document.body.clientWidth-300,o=x(k,Math.max(k,s));a(o),sessionStorage.setItem(f,o+"")},children:e("svg",{viewBox:"0 0 24 24",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:"/assets/images/root.svg#random"})})}),e("button",{className:"xpack-o-root__control-button",onClick:()=>{if(t){clearInterval(t);return}const s=setInterval(()=>{const o=document.body.clientWidth-300,v=x(k,Math.max(k,o));a(v),sessionStorage.setItem(f,v+"")},2e3);c(s)},children:e("svg",{viewBox:"0 0 24 24",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:"/assets/images/root.svg#disco-ball"})})})]})]})};function P(t,c,a){l.useEffect(()=>{const r=i=>{!i.target||!t.current||t.current.contains(i.target)||a&&a.some(d=>{var u;return(u=d.current)==null?void 0:u.contains(i.target)})||c(i)};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)}},[t,c,a])}const L=()=>{const{activeItem:t,isTopPanel:c}=S(),a="pl-show-state-selector",r=localStorage.getItem(a),i=l.createRef(),d=l.createRef();P(i,()=>o(!1),[d]);const u=g=>(g.preventDefault(),g.stopPropagation(),r?localStorage.removeItem(a):localStorage.setItem(a,"true"),location.reload(),!1),m=r?"Hide state selector":"Show state selector",_=()=>r?e(N,{}):p("div",{className:"pl-state-toggle__circles",children:[e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"})]}),[s,o]=l.useState(!1);return t?p("div",{children:[e("button",{ref:d,className:`xpack-o-root__control-button xpack-o-root__button-${s?"close":"setting"}`,onClick:()=>{o(!s)},children:e("svg",{viewBox:"0 0 30 30",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:s?"/assets/images/root.svg#close":"/assets/images/root.svg#setting"})})}),p("div",{ref:i,className:`xpack-o-root__active-item-options ${s?"show":""}`,children:[p("a",{className:"xpack-o-root__nav-item pl-state-toggle",href:"#",onClick:u,children:[e(_,{}),m]}),e("a",{className:"xpack-o-root__nav-item panel-position",href:"#",onClick:()=>{window.setState("MSG_IS_TOP_PANEL",c?"false":"true"),o(!1)},children:c?"Set left panel":"Set top panel"}),e("a",{className:"xpack-o-root__nav-item",href:C(t.path,!0),target:"_blank",children:"Open in new tab"})]})]}):e(N,{})},E=t=>{const{activeItem:c,setActiveItem:a}=S(),r=d=>(d.preventDefault(),window.location.hash=t.path,a(t),!1),i=c&&c.path===t.path?" xpack-o-root__nav-item--active":"";return e("a",{className:"xpack-o-root__nav-item"+i,href:C(t.path,!0),target:"inner",onClick:r,children:t.name})},F=({routes:t})=>{const{activeItem:c}=S(),[a,r]=l.useState(!1),i=l.createRef(),d=l.createRef(),[u,m]=l.useState(t),[_,s]=l.useState([]),[o,v]=l.useState("");P(i,()=>r(!1),[d]);const w=()=>{r(!a)},g=l.useCallback(y.debounce(n=>{const h=[],b=[];t.forEach(I=>{n.trim()&&n.trim().toLocaleLowerCase().split(/\s+/).some(M=>I.name.toLocaleLowerCase().includes(M))?b.push(I):h.push(I)}),s(b),m(h)},500),[]);return l.useEffect(()=>{g(o)},[g,o]),p(N,{children:[e("a",{ref:d,className:"xpack-o-root__button-close",onClick:w,children:e("button",{className:"xpack-o-root__control-button xpack-o-root__button-close",children:e("svg",{className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:C("/assets/images/root.svg#"+(a?"close":"list"))})})})}),e("p",{className:"xpack-o-root__title",children:c==null?void 0:c.name}),p("div",{ref:i,className:`xpack-o-root__nav-items ${a?"show":""}`,children:[e("div",{className:"xpack-o-root__search",children:e("input",{type:"text",value:o,placeholder:"Find a pattern",onChange:n=>{v(n.target.value)}})}),p("div",{className:"xpack-o-root__items",children:[o.trim()&&e("div",{className:"xpack-o-root__search-matches",children:_.length?_.filter(n=>n.path!="/"&&n.path!="/index").sort((n,h)=>n.name<h.name?-1:n.name>h.name?1:0).map((n,h)=>e(E,{...n},h)):o.trim()&&e("div",{className:"xpack-o-root__nav-message ",children:"No pattern matches"})}),e("div",{className:`xpack-o-root__search-not-matches ${o.trim()?"blur":""}`,children:u.filter(n=>n.path!="/"&&n.path!="/index").sort((n,h)=>n.name<h.name?-1:n.name>h.name?1:0).map((n,h)=>e(E,{...n},h))})]})]})]})},O=({routes:t})=>{const[c,a]=l.useState(),[r,i]=l.useState(localStorage.getItem("MSG_IS_TOP_PANEL")==="true");l.useEffect(()=>{if(!c)return;const m=document.querySelector("#root-iframe");m&&(m.src=C(c.path,!0),document.title=c.name+" - Precise Alloy UI")},[c]);const d={activeItem:c,setActiveItem:a,isTopPanel:r,setTopPanel:i};l.useEffect(()=>{const m=window.location.hash,_=m&&m.startsWith("#/")?m.substring(1):"/pages/home",s=t.findIndex(o=>o.path===_);if(s>=0)a(t[s]);else{const o=t.findIndex(v=>v.path==="/pages/home");a(t[o])}},[t]);const u=m=>{switch(m.key){case"MSG_IS_TOP_PANEL":i(m.newValue==="true");break}};return l.useEffect(()=>(window.addEventListener("storage",u),()=>{window.removeEventListener("storage",u)}),[]),t?p(R.Provider,{value:d,children:[p("div",{className:`xpack-o-root ${r?"top-panel":""}`,children:[e(F,{routes:t}),e(A,{}),e(L,{})]}),e(T,{path:"b-root"})]}):e(N,{})};export{O as default};
//# sourceMappingURL=root.0xe6beb4e2.js.map
