import{j as _,a as e,F as f}from"./react-loader.0x84402dc0.js";import{r as l,l as y}from"./vendor.0x2c817467.js";import{v as N}from"./functions.0xb841f5f3.js";const R=l.createContext({setActiveItem:()=>{},setTopPanel:()=>{}}),I=()=>l.useContext(R),v=350,x="MSG_IFRAME_SIZE",k=(t,c)=>Math.floor(Math.random()*(c-t+1)+t),M=()=>{const[t,c]=l.useState(),s=n=>{const o=document.getElementById("root-iframe-wrapper");o&&(n?(o.style.maxWidth=`min(100%, ${n}px)`,sessionStorage.setItem(x,n+"")):o.style.removeProperty("max-width"))};return _("div",{className:"xpack-o-root__frame-control",children:[e("div",{id:"root-actual-iframe-width",className:"xpack-o-root__actual-width"}),_("div",{className:"xpack-o-root__controls",children:[e("button",{className:"xpack-o-root__control-button",onClick:()=>{t&&clearInterval(t);const n=k(v,768);s(n)},children:e("svg",{viewBox:"0 0 24 24",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:"/assets/images/root.svg#phone"})})}),e("button",{className:"xpack-o-root__control-button",onClick:()=>{t&&clearInterval(t);const n=k(768,1024);s(n)},children:e("svg",{viewBox:"0 0 24 24",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:"/assets/images/root.svg#tablet"})})}),e("button",{className:"xpack-o-root__control-button",onClick:()=>{t&&clearInterval(t);const n=document.body.clientWidth-300,o=k(1024,Math.max(1024,n));s(o)},children:e("svg",{viewBox:"0 0 24 24",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:"/assets/images/root.svg#desktop"})})}),e("button",{className:"xpack-o-root__control-button",onClick:()=>{t&&clearInterval(t),s(void 0),sessionStorage.removeItem(x)},children:e("svg",{viewBox:"0 0 24 24",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:"/assets/images/root.svg#hay"})})}),e("button",{className:"xpack-o-root__control-button",onClick:()=>{t&&clearInterval(t);const n=document.body.clientWidth-300,o=k(v,Math.max(v,n));s(o),sessionStorage.setItem(x,o+"")},children:e("svg",{viewBox:"0 0 24 24",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:"/assets/images/root.svg#random"})})}),e("button",{className:"xpack-o-root__control-button",onClick:()=>{if(t){clearInterval(t);return}const n=setInterval(()=>{const o=document.body.clientWidth-300,u=k(v,Math.max(v,o));s(u),sessionStorage.setItem(x,u+"")},2e3);c(n)},children:e("svg",{viewBox:"0 0 24 24",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:"/assets/images/root.svg#disco-ball"})})})]})]})};function P(t,c,s){l.useEffect(()=>{const r=i=>{!i.target||!t.current||t.current.contains(i.target)||s&&s.some(h=>{var p;return(p=h.current)==null?void 0:p.contains(i.target)})||c(i)};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)}},[t,c,s])}const A=()=>{const{activeItem:t,isTopPanel:c}=I(),s="pl-show-state-selector",r=localStorage.getItem(s),i=l.createRef(),h=l.createRef();P(i,()=>u(!1),[h]);const p=a=>(a.preventDefault(),a.stopPropagation(),r?localStorage.removeItem(s):localStorage.setItem(s,"true"),location.reload(),!1),d=()=>{window.dispatchEvent(new CustomEvent("toggleTheme"))},g=r?"Hide state selector":"Show state selector",n=()=>r?e(f,{}):_("div",{className:"pl-state-toggle__circles",children:[e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"}),e("div",{className:"pl-state-toggle__circle"})]}),[o,u]=l.useState(!1);return t?_("div",{children:[e("button",{ref:h,className:`xpack-o-root__control-button xpack-o-root__button-${o?"close":"setting"}`,onClick:()=>{u(!o)},children:e("svg",{viewBox:"0 0 30 30",className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:o?"/assets/images/root.svg#close":"/assets/images/root.svg#setting"})})}),_("div",{ref:i,className:`xpack-o-root__active-item-options ${o?"show":""}`,children:[_("a",{className:"xpack-o-root__nav-item pl-state-toggle",href:"#",onClick:p,children:[e(n,{}),g]}),e("a",{className:"xpack-o-root__nav-item pl-state-toggle",href:"#",onClick:d,children:"Change theme"}),e("a",{className:"xpack-o-root__nav-item panel-position",href:"#",onClick:()=>{const a="MSG_IS_TOP_PANEL",m=c?"false":"true";window.localStorage.setItem(a,m),window.dispatchEvent(new StorageEvent("storage",{key:a,newValue:m})),u(!1)},children:c?"Set left panel":"Set top panel"}),e("a",{className:"xpack-o-root__nav-item",href:N(t.path,!0),target:"_blank",children:"Open in new tab"})]})]}):e(f,{})},E=t=>{const{activeItem:c,setActiveItem:s}=I(),r=h=>(h.preventDefault(),window.location.hash=t.path,s(t),!1),i=c&&c.path===t.path?" xpack-o-root__nav-item--active":"";return e("a",{className:"xpack-o-root__nav-item"+i,href:N(t.path,!0),target:"inner",onClick:r,children:t.name})},L=({routes:t})=>{const{activeItem:c}=I(),[s,r]=l.useState(!1),i=l.createRef(),h=l.createRef(),[p,d]=l.useState(t),[g,n]=l.useState([]),[o,u]=l.useState("");P(i,()=>r(!1),[h]);const S=()=>{r(!s)},w=l.useCallback(y.debounce(a=>{const m=[],b=[];t.forEach(C=>{a.trim()&&a.trim().toLocaleLowerCase().split(/\s+/).some(T=>C.name.toLocaleLowerCase().includes(T))?b.push(C):m.push(C)}),n(b),d(m)},500),[]);return l.useEffect(()=>{w(o)},[w,o]),_(f,{children:[e("a",{ref:h,className:"xpack-o-root__button-close",onClick:S,children:e("button",{className:"xpack-o-root__control-button xpack-o-root__button-close",children:e("svg",{className:"xpack-o-root__control-svg",children:e("use",{xlinkHref:N("/assets/images/root.svg#"+(s?"close":"list"))})})})}),e("p",{className:"xpack-o-root__title",children:c==null?void 0:c.name}),_("div",{ref:i,className:`xpack-o-root__nav-items ${s?"show":""}`,children:[e("div",{className:"xpack-o-root__search",children:e("input",{type:"text",value:o,placeholder:"Find a pattern",onChange:a=>{u(a.target.value)}})}),_("div",{className:"xpack-o-root__items",children:[o.trim()&&e("div",{className:"xpack-o-root__search-matches",children:g.length?g.filter(a=>a.path!="/"&&a.path!="/index").sort((a,m)=>a.name<m.name?-1:a.name>m.name?1:0).map((a,m)=>e(E,{...a},m)):o.trim()&&e("div",{className:"xpack-o-root__nav-message ",children:"No pattern matches"})}),e("div",{className:`xpack-o-root__search-not-matches ${o.trim()?"blur":""}`,children:p.filter(a=>a.path!="/"&&a.path!="/index").sort((a,m)=>a.name<m.name?-1:a.name>m.name?1:0).map((a,m)=>e(E,{...a},m))})]})]})]})},B=({routes:t})=>{const[c,s]=l.useState(),[r,i]=l.useState(localStorage.getItem("MSG_IS_TOP_PANEL")==="true");l.useEffect(()=>{if(!c)return;const d=document.querySelector("#root-iframe");d&&(d.src=N(c.path,!0),document.title=c.name+" - Precise Alloy UI")},[c]);const h={activeItem:c,setActiveItem:s,isTopPanel:r,setTopPanel:i};l.useEffect(()=>{const d=window.location.hash,g=d&&d.startsWith("#/")?d.substring(1):"/pages/home",n=t.findIndex(o=>o.path===g);if(n>=0)s(t[n]);else{const o=t.findIndex(u=>u.path==="/pages/home");s(t[o])}},[t]);const p=d=>{switch(d.key){case"MSG_IS_TOP_PANEL":i(d.newValue==="true");break}};return l.useEffect(()=>(window.addEventListener("storage",p),()=>{window.removeEventListener("storage",p)}),[]),t?e(R.Provider,{value:h,children:_("div",{className:`xpack-o-root ${r?"top-panel":""}`,children:[e(L,{routes:t}),e(M,{}),e(A,{})]})}):e(f,{})};export{B as default};
//# sourceMappingURL=root.0x046df8e8.js.map
